{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/task-management/my-app/src/app/dashboard/project/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport apiClient from '../../../lib/api';\r\nimport { useAuth } from '../../../../../context/authContext';\r\n\r\nexport default function ProjectDetailPage() {\r\n  const { id } = useParams();\r\n  const { user , project, setProject} = useAuth();\r\n\r\n  //const [project, setProject] = useState<any>(null);\r\n  const [tasks, setTasks] = useState<any[]>([]);\r\n  const [error, setError] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  //const isAdmin = project?.owner_id === user?.user_id;\r\n\r\n  useEffect(() => {\r\n    const fetchProjectAndTasks = async () => {\r\n      try {\r\n        const projectRes = await apiClient.get(`/project/${id}`);\r\n        setProject(projectRes);\r\n\r\n        const tasksRes = await apiClient.get(`/task/1/${id}`);\r\n        setTasks(tasksRes);\r\n      } catch (err) {\r\n        setError('Failed to load project or tasks');\r\n      }\r\n    };\r\n\r\n    if (id) fetchProjectAndTasks();\r\n  }, [id]);\r\n\r\n  if (!project) {\r\n    return <p className=\"p-6\">Loading project...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {error && <p className=\"text-red-500\">{error}</p>}\r\n\r\n      <h2 className=\"text-2xl font-bold mb-2\">{project.project_name}</h2>\r\n      <p className=\"text-gray-600 mb-4\">{project.project_description || 'No description'}</p>\r\n\r\n      <h3 className=\"text-xl font-semibold mt-6 mb-3\">Tasks</h3>\r\n      <ul className=\"space-y-3\">\r\n        {tasks.map((task) => (\r\n          <li key={task.task_id} className=\"border p-4 rounded shadow-sm bg-white\">\r\n            <p className=\"font-medium\">{task.task_title}</p>\r\n            <p className=\"text-sm text-gray-500\">{task.task_description || 'No description'}</p>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <br/>\r\n\r\n      \r\n      <div>\r\n            <>\r\n              {/* Create New Task Form */}\r\n              <CreateTaskForm/>\r\n            </>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CreateTaskForm({ }) {\r\n  const [title, setTitle] = useState('');\r\n  const [desc, setDesc] = useState('');\r\n  const [error, setError] = useState('');\r\n  const {project, setProject}=useAuth();\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const newTask = await apiClient.post('/task', {\r\n        task_name: title,\r\n        task_description: desc,\r\n        project_id: project?.project_id,\r\n      });\r\n\r\n      setTitle('');\r\n      setDesc('');\r\n      setError('');\r\n      //onSuccess(newTask);\r\n    } catch (err) {\r\n      setError('Failed to create task');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4 border-t pt-6\">\r\n        <h4 className=\"text-lg font-semibold\">Create New Task</h4>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Task Name\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        className=\"border p-2 w-full\"\r\n      />\r\n      <textarea\r\n        placeholder=\"Task description\"\r\n        value={desc}\r\n        onChange={(e) => setDesc(e.target.value)}\r\n        className=\"border p-2 w-full\"\r\n      />\r\n      <button type=\"submit\" className=\"bg-blue-600 text-white px-4 py-2 rounded\">\r\n        Create Task\r\n      </button>\r\n      {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}