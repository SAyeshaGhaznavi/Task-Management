{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/new-task-management/my-app/src/app/dashboard/admin/assignproject/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport apiClient from '../../../lib/api';\r\nimport { useAuth } from '../../../../../context/authContext';\r\n\r\ninterface Project {\r\n  project_id: number;\r\n  project_name: string;\r\n  project_description?: string;\r\n  company_id: number;\r\n}\r\n\r\ninterface User {\r\n  user_id: number;\r\n  user_name: string;\r\n  password: string;\r\n  phone?: string;\r\n  email: string;\r\n  createdAt?: string;\r\n}\r\n\r\nexport default function ProjectsPage() {\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showUsersFor, setShowUsersFor] = useState<number | null>(null);\r\n  const {companyProjects, companyUsers} = useAuth();\r\n\r\n  const { user, isAdmin } = useAuth();\r\n  const userId = user?.user_id;\r\n\r\n  const handleAssign = async (projectId: number, userId: number) => {\r\n    try {\r\n      await apiClient.post('/user-project', {\r\n        user_id: userId,\r\n        project_id: projectId,\r\n      });\r\n      alert(`User assigned to project!`);\r\n    } catch (err) {\r\n      alert('Failed to assign user.');\r\n    }\r\n  };\r\n\r\n  const toggleUserList = (projectId: number) => {\r\n    setShowUsersFor((prev) => (prev === projectId ? null : projectId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-2xl font-semibold mb-4\">Company Projects</h2>\r\n\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n\r\n      <ul className=\"space-y-6\">\r\n        {companyProjects.map((project) => (\r\n          <li\r\n            key={project.project_id}\r\n            className=\"p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition\"\r\n          >\r\n            <h3 className=\"text-lg font-medium text-blue-700\">{project.project_name}</h3>\r\n            <p className=\"text-sm text-gray-600\">{project.project_description || 'No description'}</p>\r\n            <p className=\"text-xs text-gray-400 mt-2\">Company ID: {project.company_id}</p>\r\n\r\n            <button\r\n              onClick={() => toggleUserList(project.project_id)}\r\n              className=\"mt-3 text-sm text-blue-600 underline\"\r\n            >\r\n              {showUsersFor === project.project_id ? 'Hide users' : 'Assign user to project'}\r\n            </button>\r\n\r\n            {showUsersFor === project.project_id && (\r\n              <div className=\"mt-3 p-3 bg-gray-50 border rounded\">\r\n                <p className=\"font-semibold mb-2\">Select a user:</p>\r\n                <ul className=\"space-y-2\">\r\n                  {companyUsers?.map((u) => (\r\n                    <li\r\n                      key={u.user_id}\r\n                      className=\"flex justify-between items-center bg-white p-2 rounded border\"\r\n                    >\r\n                      <span>{u.user_name}</span>\r\n                      <button\r\n                        onClick={() => handleAssign(project.project_id, u.user_id)}\r\n                        className=\"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700\"\r\n                      >\r\n                        Assign\r\n                      </button>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAsBe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAChE,MAAM,EAAC,eAAe,EAAE,YAAY,EAAC,GAAG,CAAA,GAAA,0HAAA,CAAA,UAAO,AAAD;IAE9C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,0HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,SAAS,MAAM;IAErB,MAAM,eAAe,OAAO,WAAmB;QAC7C,IAAI;YACF,MAAM,2HAAA,CAAA,UAAS,CAAC,IAAI,CAAC,iBAAiB;gBACpC,SAAS;gBACT,YAAY;YACd;YACA,MAAM,CAAC,yBAAyB,CAAC;QACnC,EAAE,OAAO,KAAK;YACZ,MAAM;QACR;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,gBAAgB,CAAC,OAAU,SAAS,YAAY,OAAO;IACzD;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA8B;;;;;;YAE3C,uBAAS,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAE5C,6LAAC;gBAAG,WAAU;0BACX,gBAAgB,GAAG,CAAC,CAAC,wBACpB,6LAAC;wBAEC,WAAU;;0CAEV,6LAAC;gCAAG,WAAU;0CAAqC,QAAQ,YAAY;;;;;;0CACvE,6LAAC;gCAAE,WAAU;0CAAyB,QAAQ,mBAAmB,IAAI;;;;;;0CACrE,6LAAC;gCAAE,WAAU;;oCAA6B;oCAAa,QAAQ,UAAU;;;;;;;0CAEzE,6LAAC;gCACC,SAAS,IAAM,eAAe,QAAQ,UAAU;gCAChD,WAAU;0CAET,iBAAiB,QAAQ,UAAU,GAAG,eAAe;;;;;;4BAGvD,iBAAiB,QAAQ,UAAU,kBAClC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAAqB;;;;;;kDAClC,6LAAC;wCAAG,WAAU;kDACX,cAAc,IAAI,CAAC,kBAClB,6LAAC;gDAEC,WAAU;;kEAEV,6LAAC;kEAAM,EAAE,SAAS;;;;;;kEAClB,6LAAC;wDACC,SAAS,IAAM,aAAa,QAAQ,UAAU,EAAE,EAAE,OAAO;wDACzD,WAAU;kEACX;;;;;;;+CAPI,EAAE,OAAO;;;;;;;;;;;;;;;;;uBApBnB,QAAQ,UAAU;;;;;;;;;;;;;;;;AAwCnC;GAzEwB;;QAGkB,0HAAA,CAAA,UAAO;QAErB,0HAAA,CAAA,UAAO;;;KALX","debugId":null}}]
}